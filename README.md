# ğŸ“± WhatsApp Group Member Extractor + WhatsHybrid Lite

ExtensÃ£o Chrome profissional para extrair membros de grupos do WhatsApp Web com interface moderna e funcionalidades avanÃ§adas, agora integrada com recursos do WhatsHybrid Lite.

## âœ¨ Funcionalidades

### ğŸ“¥ ExtraÃ§Ã£o de Grupos
- ğŸ“¥ **ExtraÃ§Ã£o de Membros**: Extrai membros de grupos ativos e arquivados
- ğŸ“Š **ExportaÃ§Ã£o MÃºltipla**: Exporta para CSV e Google Sheets
- ğŸ’¾ **HistÃ³rico Persistente**: Armazena extraÃ§Ãµes no IndexedDB
- â¸ï¸ **Controle Total**: Pause, continue ou pare extraÃ§Ãµes em andamento
- ğŸ”„ **Retry AutomÃ¡tico**: Tenta novamente em caso de falha
- ğŸ” **Filtros Inteligentes**: Filtra grupos invÃ¡lidos ou excluÃ­dos automaticamente
- âš¡ **Virtual Scroll**: Performance otimizada para grandes listas

### ğŸ“¢ Envio em Massa (NOVO!)
- ğŸ“± **Importar NÃºmeros**: Cole nÃºmeros ou importe via CSV
- ğŸ’¬ **Templates Personalizados**: Use variÃ¡veis {{nome}}, {{first_name}}, {{phone}}
- ğŸ–¼ï¸ **Anexar Imagens**: Envie mensagens com imagens anexadas
- ğŸ˜Š **Emoji Picker**: Adicione emojis facilmente Ã s mensagens
- ğŸ‘ï¸ **Preview WhatsApp**: Visualize como ficarÃ¡ a mensagem
- ğŸ“‹ **Gerenciamento de Fila**: Controle completo da fila de envio
- â¸ï¸ **Controles AvanÃ§ados**: Iniciar, pausar, retomar e parar campanhas
- ğŸ“Š **EstatÃ­sticas em Tempo Real**: Acompanhe enviados, falhas e pendentes

### ğŸ”„ Anti-Revoke (NOVO!)
- ğŸ—‘ï¸ **Recuperar Mensagens Apagadas**: Visualize mensagens que foram apagadas
- âœï¸ **HistÃ³rico de EdiÃ§Ãµes**: Veja o conteÃºdo original de mensagens editadas
- ğŸ’¾ **Timeline Visual**: Interface moderna para navegaÃ§Ã£o
- ğŸ“¤ **Exportar JSON**: Salve o histÃ³rico de mensagens recuperadas

### ğŸ“± ExtraÃ§Ã£o de Contatos (NOVO!)
- âš¡ **ExtraÃ§Ã£o InstantÃ¢nea**: Via API do WhatsApp (muito mais rÃ¡pido)
- ğŸ“ **CategorizaÃ§Ã£o AutomÃ¡tica**: Normal, Arquivados e Bloqueados
- ğŸ“‹ **Copiar e Exportar**: Copie para clipboard ou exporte em CSV
- âœ… **ValidaÃ§Ã£o de NÃºmeros**: ValidaÃ§Ã£o automÃ¡tica de nÃºmeros brasileiros

### ğŸ¯ Interface Dupla
- ğŸ¯ **Side Panel Moderno**: Interface lateral persistente no Chrome
- ğŸ“Š **Top Panel Expandido**: 4 abas (Extrator, Grupos, Recover, Config)
- ğŸ¨ **Interface Premium**: Design moderno com gradientes e animaÃ§Ãµes
- ğŸš€ **Modo Pro**: Todas as operaÃ§Ãµes continuam em segundo plano

## ğŸš€ InstalaÃ§Ã£o

### Para UsuÃ¡rios

1. Baixe o repositÃ³rio como ZIP
2. Extraia o conteÃºdo em uma pasta
3. Abra o Chrome e acesse `chrome://extensions/`
4. Ative o **Modo desenvolvedor** (canto superior direito)
5. Clique em **Carregar sem compactaÃ§Ã£o**
6. Selecione a pasta extraÃ­da
7. Pronto! O Ã­cone da extensÃ£o aparecerÃ¡ na barra de ferramentas

### Para Desenvolvedores

```bash
# Clone o repositÃ³rio
git clone https://github.com/sevadarkness/correcao.git
cd correcao

# Carregue no Chrome
# 1. Abra chrome://extensions/
# 2. Ative "Modo desenvolvedor"
# 3. Clique em "Carregar sem compactaÃ§Ã£o"
# 4. Selecione esta pasta
```

## ğŸ“– Como Usar

### Passo 1: Acesse o WhatsApp Web
1. Abra o WhatsApp Web (web.whatsapp.com)
2. FaÃ§a login se necessÃ¡rio

### Passo 2: Abra a ExtensÃ£o
1. Clique no Ã­cone da extensÃ£o na barra de ferramentas
2. A interface lateral (Side Panel) serÃ¡ aberta

### Passo 3: Carregue os Grupos
1. Clique no botÃ£o **"Carregar Grupos"**
2. Aguarde enquanto a extensÃ£o lista seus grupos
3. Use os filtros para ver grupos ativos ou arquivados

### Passo 4: Selecione um Grupo
1. Escolha um grupo da lista
2. Use a busca para encontrar grupos especÃ­ficos
3. Clique no grupo desejado para selecionÃ¡-lo

### Passo 5: Extrair Membros
1. Clique em **"Extrair Membros"**
2. Acompanhe o progresso na barra
3. Use os controles para pausar, continuar ou parar

### Passo 6: Exporte os Dados
1. ApÃ³s a conclusÃ£o, visualize os membros extraÃ­dos
2. Escolha uma opÃ§Ã£o de exportaÃ§Ã£o:
   - **CSV**: Baixe como arquivo CSV
   - **Copiar**: Copie a lista para Ã¡rea de transferÃªncia
   - **Google Sheets**: Copie formatado para colar no Sheets
   - **Abrir no Sheets**: Abra diretamente no Google Sheets

## âŒ¨ï¸ Atalhos de Teclado

| Atalho | AÃ§Ã£o |
|--------|------|
| `Ctrl+L` | Carregar grupos |
| `Ctrl+H` | Ver histÃ³rico |
| `Ctrl+F` | Buscar grupo |
| `Ctrl+S` | Exportar CSV |
| `Ctrl+G` | Copiar para Google Sheets |

## ğŸ¯ Como Usar as Novas Funcionalidades

### ğŸ“¢ Envio em Massa
1. No Side Panel, clique no Ã­cone ğŸ“¢ no header
2. Cole os nÃºmeros (um por linha) ou importe um CSV
3. Digite sua mensagem usando variÃ¡veis: {{nome}}, {{first_name}}, {{phone}}
4. (Opcional) Anexe uma imagem
5. Clique em **"Gerar Fila"**
6. Clique em **"Iniciar Campanha"**
7. Acompanhe o progresso em tempo real

### ğŸ“± ExtraÃ§Ã£o de Contatos
1. O Top Panel aparece automaticamente quando o Side Panel estÃ¡ aberto
2. Clique na aba **"Extrator"**
3. Clique em **"Extrair Contatos (API InstantÃ¢nea)"**
4. Os contatos serÃ£o separados em: Normais, Arquivados e Bloqueados
5. Use os botÃµes de copiar ou exporte para CSV

### ğŸ”„ Recuperar Mensagens
1. No Top Panel, clique na aba **"Recover"**
2. Todas as mensagens apagadas/editadas aparecerÃ£o automaticamente
3. Veja o conteÃºdo original de cada mensagem
4. Copie mensagens especÃ­ficas ou exporte tudo em JSON

### âš™ï¸ ConfiguraÃ§Ãµes
1. No Top Panel, clique na aba **"Config"**
2. Configure delays para envio em massa
3. Salve rascunhos de campanhas
4. Exporte relatÃ³rios de campanhas

## ğŸ› ï¸ Tecnologias

- **Chrome Extension Manifest V3**: Ãšltima versÃ£o da plataforma
- **Side Panel API**: Interface lateral moderna
- **IndexedDB**: Armazenamento local persistente
- **Virtual Scroll**: Performance otimizada
- **WhatsApp Web API**: IntegraÃ§Ã£o nativa com WhatsApp
- **CSS Gradients & Animations**: Design moderno

## ğŸ“ Estrutura do Projeto

```
correcao/
â”œâ”€â”€ background/
â”‚   â””â”€â”€ background.js               # Service worker + estado de extraÃ§Ã£o e campanhas
â”œâ”€â”€ content/
â”‚   â”œâ”€â”€ content.js                  # Script principal + handlers de mensagens
â”‚   â”œâ”€â”€ inject.js                   # API injetada no WhatsApp
â”‚   â”œâ”€â”€ extractor-v6-optimized.js   # Motor de extraÃ§Ã£o de grupos
â”‚   â”œâ”€â”€ extractor.contacts.js      # ExtraÃ§Ã£o de contatos via API (NOVO)
â”‚   â”œâ”€â”€ campaign.js                 # Gerenciamento de campanhas (NOVO)
â”‚   â”œâ”€â”€ wpp-hooks.js                # Hooks WhatsApp: recover + extraÃ§Ã£o (NOVO)
â”‚   â”œâ”€â”€ top-panel-injector.js       # Injetor do Top Panel (4 abas)
â”‚   â””â”€â”€ top-panel.css               # Estilos do Top Panel
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ utils-optimized.js          # UtilitÃ¡rios otimizados
â”‚   â”œâ”€â”€ storage.js                  # Gerenciamento do IndexedDB
â”‚   â”œâ”€â”€ google-sheets-export.js     # ExportaÃ§Ã£o para Sheets
â”‚   â”œâ”€â”€ selectors.js                # Seletores DOM centralizados
â”‚   â””â”€â”€ data-normalizer.js          # NormalizaÃ§Ã£o de dados
â”œâ”€â”€ icons/                          # Ãcones da extensÃ£o
â”œâ”€â”€ sidepanel.html                  # Interface do Side Panel (5 steps)
â”œâ”€â”€ sidepanel.css                   # Estilos da interface
â”œâ”€â”€ sidepanel.js                    # LÃ³gica da interface + campanhas
â”œâ”€â”€ manifest.json                   # ConfiguraÃ§Ã£o da extensÃ£o
â””â”€â”€ README.md                       # Este arquivo
```

## ğŸ”’ SeguranÃ§a e Privacidade

- âœ… **Processamento Local**: Todos os dados sÃ£o processados localmente
- âœ… **Sem Servidores Externos**: Nenhum dado Ã© enviado para servidores
- âœ… **Armazenamento Local**: IndexedDB armazena apenas no seu navegador
- âœ… **CÃ³digo Aberto**: Todo o cÃ³digo estÃ¡ disponÃ­vel para auditoria
- âœ… **Sem Rastreamento**: NÃ£o coletamos nenhuma informaÃ§Ã£o pessoal

## ğŸ› Problemas Conhecidos

Veja as [Issues](https://github.com/sevadarkness/correcao/issues) para lista completa.

## ğŸ¤ Contribuindo

ContribuiÃ§Ãµes sÃ£o bem-vindas! Por favor:

1. FaÃ§a um Fork do projeto
2. Crie uma branch para sua feature (`git checkout -b feature/AmazingFeature`)
3. Commit suas mudanÃ§as (`git commit -m 'Add some AmazingFeature'`)
4. Push para a branch (`git push origin feature/AmazingFeature`)
5. Abra um Pull Request

## ğŸ“ Changelog

### v6.1.0 (Atual) - WhatsHybrid Lite Integration ğŸ‰
**IntegraÃ§Ã£o completa do WhatsHybrid Lite mantendo 100% das funcionalidades originais**

#### ğŸ†• Novas Funcionalidades

**Top Panel Expandido (4 Abas):**
- âœ… **Aba Extrator**: ExtraÃ§Ã£o instantÃ¢nea de contatos via API
  - SeparaÃ§Ã£o automÃ¡tica: Normal, Arquivados, Bloqueados
  - Copiar individual ou todos os contatos
  - Exportar para CSV
- âœ… **Aba Grupos**: Link para Side Panel
- âœ… **Aba Recover**: Anti-revoke de mensagens
  - Timeline visual de mensagens apagadas e editadas
  - VisualizaÃ§Ã£o do conteÃºdo original
  - Exportar histÃ³rico em JSON
  - Contador em tempo real
- âœ… **Aba Config**: ConfiguraÃ§Ãµes avanÃ§adas
  - ParÃ¢metros de delay (min/max)
  - Agendamento de campanhas
  - Gerenciamento de rascunhos
  - ExportaÃ§Ã£o de relatÃ³rios

**Side Panel - Envio em Massa:**
- âœ… Nova seÃ§Ã£o completa para campanhas
- âœ… ImportaÃ§Ã£o de nÃºmeros (manual ou CSV)
- âœ… Templates com variÃ¡veis: {{nome}}, {{first_name}}, {{phone}}
- âœ… Emoji picker integrado
- âœ… Anexo de imagens com preview
- âœ… Preview estilo WhatsApp (balÃ£o verde)
- âœ… Gerenciamento de fila com tabela
- âœ… Controles: Iniciar, Pausar, Continuar, Parar
- âœ… EstatÃ­sticas: Enviados, Falhas, Pendentes
- âœ… Barra de progresso com tempo estimado
- âœ… AÃ§Ãµes: Pular atual, Remover item, Zerar fila

**Backend:**
- âœ… Hooks WhatsApp para interceptaÃ§Ã£o de mensagens
- âœ… ExtraÃ§Ã£o de contatos via API interna
- âœ… Gerenciamento de estado de campanhas
- âœ… PersistÃªncia de dados entre reinicializaÃ§Ãµes

#### ğŸ”§ Melhorias TÃ©cnicas
- âœ… ValidaÃ§Ã£o rigorosa de nÃºmeros brasileiros
- âœ… Timeout protection em loops infinitos
- âœ… Null checks em todas as operaÃ§Ãµes crÃ­ticas
- âœ… ValidaÃ§Ã£o de entrada em geradores de fila
- âœ… Constantes nomeadas para magic numbers
- âœ… CodeQL Security Scan: 0 vulnerabilidades

#### ğŸ¨ Design
- âœ… Tema verde WhatsApp mantido (#075e54, #128c7e, #25d366)
- âœ… +1500 linhas de CSS para novos componentes
- âœ… AnimaÃ§Ãµes e transiÃ§Ãµes suaves
- âœ… Responsividade mantida

### v6.0.9
- âœ… CorreÃ§Ã£o do comportamento do Side Panel
- âœ… SimplificaÃ§Ã£o da lÃ³gica de abertura automÃ¡tica
- âœ… Delay otimizado para 1.5s apÃ³s redirecionamento
- âœ… RemoÃ§Ã£o de retry logic complexo para maior estabilidade

### v6.0.8
- âœ… RestriÃ§Ã£o do Side Panel apenas para WhatsApp Web
- âœ… Side Panel nÃ£o aparece em outras abas
- âœ… Redirecionamento automÃ¡tico ao clicar fora do WhatsApp
- âœ… Gerenciamento inteligente do Side Panel por aba
- âœ… ConfiguraÃ§Ã£o automÃ¡tica para abas existentes

### v6.0.3
- âœ… Filtragem de grupos invÃ¡lidos/excluÃ­dos
- âœ… Lock de extraÃ§Ã£o para prevenir race conditions
- âœ… Mensagens de erro humanizadas
- âœ… Badge "Pro Mode" no header
- âœ… Timeout dinÃ¢mico baseado no tamanho do grupo
- âœ… Seletores DOM centralizados
- âœ… UtilitÃ¡rios de normalizaÃ§Ã£o de dados

### v6.0.2
- âœ… Side Panel como interface padrÃ£o
- âœ… Virtual Scroll para performance
- âœ… HistÃ³rico de extraÃ§Ãµes
- âœ… ExportaÃ§Ã£o para Google Sheets

### v6.0.1
- âœ… Suporte a grupos arquivados
- âœ… Retry automÃ¡tico
- âœ… Interface moderna

## ğŸ“„ LicenÃ§a

MIT License - veja o arquivo [LICENSE](LICENSE) para detalhes.

## ğŸ‘¨â€ğŸ’» Autor

**sevadarkness**

- GitHub: [@sevadarkness](https://github.com/sevadarkness)

## â­ Agradecimentos

Se esta extensÃ£o foi Ãºtil para vocÃª, considere dar uma estrela no projeto!

---

**Nota**: Esta extensÃ£o nÃ£o Ã© afiliada, associada, autorizada, endossada por, ou de qualquer forma oficialmente conectada com WhatsApp ou qualquer de suas subsidiÃ¡rias ou afiliadas.
